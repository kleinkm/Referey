package com.kmk.Referey;

import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.Preference;
import android.preference.PreferenceActivity;
import android.preference.Preference.OnPreferenceClickListener;


public class Preferences extends PreferenceActivity {
	 Preference preserve_path;
	 Preference remove_path;
	 CheckBoxPreference alternative_path;
	 
	/** Called when the activity is first created. */
	@Override
	public void onCreate(Bundle savedInstanceState) {
		boolean dark_theme = false;
		
		Bundle extras = getIntent().getExtras();
		if(extras != null)
		{
			dark_theme = extras.getBoolean("com.kmk.Referey.dark_theme");

		}
		
	    if ( dark_theme ) {
    		setTheme(android.R.style.Theme_Black);
    	} else {
    		setTheme(android.R.style.Theme_Light);
    	}
	    super.onCreate(savedInstanceState);
	    addPreferencesFromResource(R.xml.preferences);

	    alternative_path = (CheckBoxPreference) findPreference("alternative_path");
	    preserve_path = findPreference("preserve_path");
	    remove_path = findPreference("remove_path");
	    
    	if ( alternative_path.isChecked() == true ) {
    		preserve_path.setEnabled(false);
    		remove_path.setEnabled(true);
    	} else {
    		preserve_path.setEnabled(true);
    		remove_path.setEnabled(false);
    	}
	    
	    alternative_path.setOnPreferenceClickListener(new OnPreferenceClickListener() {
	        public boolean onPreferenceClick(Preference preference) {
	            if ( preference.getKey().contains("alternative_path") ) {
	            	if ( alternative_path.isChecked() == true ) {
	            		preserve_path.setEnabled(false);
	            		remove_path.setEnabled(true);
	            	} else {
	            		preserve_path.setEnabled(true);
	            		remove_path.setEnabled(false);	            	}
	            	return true;
	            } else {
	            	return false;
	            }
	        }
	    });

	}
}
	

